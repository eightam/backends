var SubscriptionsTransportWs=function(a){function b(d){if(c[d])return c[d].exports;var e=c[d]={i:d,l:!1,exports:{}};return a[d].call(e.exports,e,e.exports,b),e.l=!0,e.exports}var c={};return b.m=a,b.c=c,b.i=function(a){return a},b.d=function(a,c,d){b.o(a,c)||Object.defineProperty(a,c,{configurable:!1,enumerable:!0,get:d})},b.n=function(a){var c=a&&a.__esModule?function(){return a["default"]}:function(){return a};return b.d(c,"a",c),c},b.o=function(a,b){return Object.prototype.hasOwnProperty.call(a,b)},b.p="",b(b.s=9)}([function(a,b,c){"use strict";var d=c(8);b.addGraphQLSubscriptions=function(a,b){return Object.assign(a,{subscribe:function(a,c){return b.subscribe({query:d.print(a.query),variables:a.variables},c)},unsubscribe:function(a){b.unsubscribe(a)}})}},function(a,b){"use strict";b.SUBSCRIPTION_FAIL="subscription_fail";b.SUBSCRIPTION_END="subscription_end";b.SUBSCRIPTION_DATA="subscription_data";b.SUBSCRIPTION_START="subscription_start";b.SUBSCRIPTION_SUCCESS="subscription_success";b.KEEPALIVE="keepalive";b.INIT="init";b.INIT_SUCCESS="init_success";b.INIT_FAIL="init_fail"},function(a,b){"use strict";b.GRAPHQL_SUBSCRIPTIONS="graphql-subscriptions"},function(a){function b(a){a=a||{},this.ms=a.min||100,this.max=a.max||1e4,this.factor=a.factor||2,this.jitter=0<a.jitter&&1>=a.jitter?a.jitter:0,this.attempts=0}a.exports=b,b.prototype.duration=function(){var a=Math.floor,b=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var c=Math.random(),d=a(c*this.jitter*b);b=0==(1&a(10*c))?b-d:b+d}return 0|Math.min(b,this.max)},b.prototype.reset=function(){this.attempts=0},b.prototype.setMin=function(a){this.ms=a},b.prototype.setMax=function(a){this.max=a},b.prototype.setJitter=function(a){this.jitter=a}},function(a){"use strict";function b(){}function c(a,b,c){this.fn=a,this.context=b,this.once=c||!1}function d(){this._events=new b,this._eventsCount=0}var e=Object.prototype.hasOwnProperty,f="~";Object.create&&(b.prototype=Object.create(null),!new b().__proto__&&(f=!1)),d.prototype.eventNames=function(){var a,b,c=[];if(0===this._eventsCount)return c;for(b in a=this._events)e.call(a,b)&&c.push(f?b.slice(1):b);return Object.getOwnPropertySymbols?c.concat(Object.getOwnPropertySymbols(a)):c},d.prototype.listeners=function(a,b){var c=f?f+a:a,d=this._events[c];if(b)return!!d;if(!d)return[];if(d.fn)return[d.fn];for(var e=0,g=d.length,h=Array(g);e<g;e++)h[e]=d[e].fn;return h},d.prototype.emit=function(a,b,c,d,e,g){var h=f?f+a:a;if(!this._events[h])return!1;var k,l,m=this._events[h],n=arguments.length;if(m.fn){switch(m.once&&this.removeListener(a,m.fn,void 0,!0),n){case 1:return m.fn.call(m.context),!0;case 2:return m.fn.call(m.context,b),!0;case 3:return m.fn.call(m.context,b,c),!0;case 4:return m.fn.call(m.context,b,c,d),!0;case 5:return m.fn.call(m.context,b,c,d,e),!0;case 6:return m.fn.call(m.context,b,c,d,e,g),!0;}for(l=1,k=Array(n-1);l<n;l++)k[l-1]=arguments[l];m.fn.apply(m.context,k)}else{var o,p=m.length;for(l=0;l<p;l++)switch(m[l].once&&this.removeListener(a,m[l].fn,void 0,!0),n){case 1:m[l].fn.call(m[l].context);break;case 2:m[l].fn.call(m[l].context,b);break;case 3:m[l].fn.call(m[l].context,b,c);break;case 4:m[l].fn.call(m[l].context,b,c,d);break;default:if(!k)for(o=1,k=Array(n-1);o<n;o++)k[o-1]=arguments[o];m[l].fn.apply(m[l].context,k);}}return!0},d.prototype.on=function(a,b,d){var e=new c(b,d||this),g=f?f+a:a;return this._events[g]?this._events[g].fn?this._events[g]=[this._events[g],e]:this._events[g].push(e):(this._events[g]=e,this._eventsCount++),this},d.prototype.once=function(a,b,d){var e=new c(b,d||this,!0),g=f?f+a:a;return this._events[g]?this._events[g].fn?this._events[g]=[this._events[g],e]:this._events[g].push(e):(this._events[g]=e,this._eventsCount++),this},d.prototype.removeListener=function(a,c,d,e){var g=f?f+a:a;if(!this._events[g])return this;if(!c)return 0==--this._eventsCount?this._events=new b:delete this._events[g],this;var h=this._events[g];if(h.fn)h.fn!==c||e&&!h.once||d&&h.context!==d||(0==--this._eventsCount?this._events=new b:delete this._events[g]);else{for(var j=0,k=[],l=h.length;j<l;j++)(h[j].fn!==c||e&&!h[j].once||d&&h[j].context!==d)&&k.push(h[j]);k.length?this._events[g]=1===k.length?k[0]:k:0==--this._eventsCount?this._events=new b:delete this._events[g]}return this},d.prototype.removeAllListeners=function(a){var c;return a?(c=f?f+a:a,this._events[c]&&(0==--this._eventsCount?this._events=new b:delete this._events[c])):(this._events=new b,this._eventsCount=0),this},d.prototype.off=d.prototype.removeListener,d.prototype.addListener=d.prototype.on,d.prototype.setMaxListeners=function(){return this},d.prefixed=f,d.EventEmitter=d,a.exports=d},function(a){a.exports=function(a){var b=typeof a;return!!a&&("object"==b||"function"==b)}},function(a){function b(a){return!!a&&"object"==typeof a}var c=Object.prototype,d=c.toString,e=Array.isArray;a.exports=function(a){return"string"==typeof a||!e(a)&&b(a)&&d.call(a)=="[object String]"}},function(a){var b=function(){return this}();try{b=b||Function("return this")()||(1,eval)("this")}catch(a){"object"==typeof window&&(b=window)}a.exports=b},function(a){a.exports=function(a){function b(d){if(c[d])return c[d].exports;var e=c[d]={exports:{},id:d,loaded:!1};return a[d].call(e.exports,e,e.exports,b),e.loaded=!0,e.exports}var c={};return b.m=a,b.c=c,b.p="",b(0)}([function(a,b,c){a.exports=c(1)},function(a,b,c){'use strict';function d(a,b){return a?a.filter(function(a){return a}).join(b||""):""}function e(a){return a&&0!==a.length?g("{\n"+d(a,"\n"))+"\n}":"{}"}function f(a,b,c){return b?a+b+(c||""):""}function g(a){return a&&a.replace(/\n/g,"\n  ")}Object.defineProperty(b,"__esModule",{value:!0}),b.print=function(a){return(0,h.visit)(a,{leave:i})};var h=c(2),i={Name:function(a){return a.value},Variable:function(a){return"$"+a.name},Document:function(a){return d(a.definitions,"\n\n")+"\n"},OperationDefinition:function(a){var b=a.operation,c=a.name,e=f("(",d(a.variableDefinitions,", "),")"),g=d(a.directives," "),h=a.selectionSet;return c||g||e||"query"!==b?d([b,d([c,e]),g,h]," "):h},VariableDefinition:function(a){var b=a.variable,c=a.type,d=a.defaultValue;return b+": "+c+f(" = ",d)},SelectionSet:function(a){var b=a.selections;return e(b)},Field:function(a){var b=a.alias,c=a.name,e=a.arguments,g=a.directives,h=a.selectionSet;return d([f("",b,": ")+c+f("(",d(e,", "),")"),d(g," "),h]," ")},Argument:function(a){var b=a.name,c=a.value;return b+": "+c},FragmentSpread:function(a){var b=a.name,c=a.directives;return"..."+b+f(" ",d(c," "))},InlineFragment:function(a){var b=a.typeCondition,c=a.directives,e=a.selectionSet;return d(["...",f("on ",b),d(c," "),e]," ")},FragmentDefinition:function(a){var b=a.name,c=a.typeCondition,e=a.directives,g=a.selectionSet;return"fragment "+b+" on "+c+" "+f("",d(e," ")," ")+g},IntValue:function(a){var b=a.value;return b},FloatValue:function(a){var b=a.value;return b},StringValue:function(a){var b=a.value;return JSON.stringify(b)},BooleanValue:function(a){var b=a.value;return JSON.stringify(b)},EnumValue:function(a){var b=a.value;return b},ListValue:function(a){var b=a.values;return"["+d(b,", ")+"]"},ObjectValue:function(a){var b=a.fields;return"{"+d(b,", ")+"}"},ObjectField:function(a){var b=a.name,c=a.value;return b+": "+c},Directive:function(a){var b=a.name,c=a.arguments;return"@"+b+f("(",d(c,", "),")")},NamedType:function(a){var b=a.name;return b},ListType:function(a){var b=a.type;return"["+b+"]"},NonNullType:function(a){var b=a.type;return b+"!"},SchemaDefinition:function(a){var b=a.directives,c=a.operationTypes;return d(["schema",d(b," "),e(c)]," ")},OperationTypeDefinition:function(a){var b=a.operation,c=a.type;return b+": "+c},ScalarTypeDefinition:function(a){var b=a.name,c=a.directives;return d(["scalar",b,d(c," ")]," ")},ObjectTypeDefinition:function(a){var b=a.name,c=a.interfaces,g=a.directives,h=a.fields;return d(["type",b,f("implements ",d(c,", ")),d(g," "),e(h)]," ")},FieldDefinition:function(a){var b=a.name,c=a.arguments,e=a.type,g=a.directives;return b+f("(",d(c,", "),")")+": "+e+f(" ",d(g," "))},InputValueDefinition:function(a){var b=a.name,c=a.type,e=a.defaultValue,g=a.directives;return d([b+": "+c,f("= ",e),d(g," ")]," ")},InterfaceTypeDefinition:function(a){var b=a.name,c=a.directives,f=a.fields;return d(["interface",b,d(c," "),e(f)]," ")},UnionTypeDefinition:function(a){var b=a.name,c=a.directives,e=a.types;return d(["union",b,d(c," "),"= "+d(e," | ")]," ")},EnumTypeDefinition:function(a){var b=a.name,c=a.directives,f=a.values;return d(["enum",b,d(c," "),e(f)]," ")},EnumValueDefinition:function(a){var b=a.name,c=a.directives;return d([b,d(c," ")]," ")},InputObjectTypeDefinition:function(a){var b=a.name,c=a.directives,f=a.fields;return d(["input",b,d(c," "),e(f)]," ")},TypeExtensionDefinition:function(a){var b=a.definition;return"extend "+b},DirectiveDefinition:function(a){var b=a.name,c=a.arguments,e=a.locations;return"directive @"+b+f("(",d(c,", "),")")+" on "+d(e," | ")}}},function(a,b){'use strict';function c(a){return a&&"string"==typeof a.kind}function d(a,b,c){var d=a[b];if(d){if(!c&&"function"==typeof d)return d;var e=c?d.leave:d.enter;if("function"==typeof e)return e}else{var f=c?a.leave:a.enter;if(f){if("function"==typeof f)return f;var g=f[b];if("function"==typeof g)return g}}}Object.defineProperty(b,"__esModule",{value:!0}),b.visit=function(a,b,g){var h=void 0,i=Array.isArray(a),j=[a],l=-1,m=[],n=void 0,o=[],p=[],q=a;do{l++;var r=l===j.length,s=void 0,t=void 0,u=r&&0!==m.length;if(r){if(s=0===p.length?void 0:o.pop(),t=n,n=p.pop(),u){if(i)t=t.slice();else{var v={};for(var w in t)t.hasOwnProperty(w)&&(v[w]=t[w]);t=v}for(var k=0,x=0;x<m.length;x++){var y=m[x][0],z=m[x][1];i&&(y-=k),i&&null===z?(t.splice(y,1),k++):t[y]=z}}l=h.index,j=h.keys,m=h.edits,i=h.inArray,h=h.prev}else{if(s=n?i?l:j[l]:void 0,t=n?n[s]:q,null===t||void 0===t)continue;n&&o.push(s)}var A=void 0;if(!Array.isArray(t)){if(!c(t))throw new Error("Invalid AST Node: "+JSON.stringify(t));var B=d(b,t.kind,r);if(B){if(A=B.call(b,t,s,n,o,p),A===f)break;if(!1===A){if(!r){o.pop();continue}}else if(void 0!==A&&(m.push([s,A]),!r))if(c(A))t=A;else{o.pop();continue}}}void 0===A&&u&&m.push([s,t]),r||(h={inArray:i,index:l,keys:j,edits:m,prev:h},i=Array.isArray(t),j=i?t:(g||e)[t.kind]||[],l=-1,m=[],n&&p.push(n),n=t)}while(void 0!==h);return 0!==m.length&&(q=m[m.length-1][1]),q},b.visitInParallel=function(a){var b=Array(a.length);return{enter:function(c){for(var e=0;e<a.length;e++)if(!b[e]){var g=d(a[e],c.kind,!1);if(g){var h=g.apply(a[e],arguments);if(!1===h)b[e]=c;else if(h===f)b[e]=f;else if(h!==void 0)return h}}},leave:function(c){for(var e=0;e<a.length;e++)if(!b[e]){var g=d(a[e],c.kind,!0);if(g){var h=g.apply(a[e],arguments);if(h===f)b[e]=f;else if(h!==void 0&&!1!==h)return h}}else b[e]===c&&(b[e]=null)}}},b.visitWithTypeInfo=function(a,b){return{enter:function(e){a.enter(e);var f=d(b,e.kind,!1);if(f){var g=f.apply(b,arguments);return void 0!==g&&(a.leave(e),c(g)&&a.enter(g)),g}},leave:function(c){var e=d(b,c.kind,!0),f=void 0;return e&&(f=e.apply(b,arguments)),a.leave(c),f}}};var e=b.QueryDocumentKeys={Name:[],Document:["definitions"],OperationDefinition:["name","variableDefinitions","directives","selectionSet"],VariableDefinition:["variable","type","defaultValue"],Variable:["name"],SelectionSet:["selections"],Field:["alias","name","arguments","directives","selectionSet"],Argument:["name","value"],FragmentSpread:["name","directives"],InlineFragment:["typeCondition","directives","selectionSet"],FragmentDefinition:["name","typeCondition","directives","selectionSet"],IntValue:[],FloatValue:[],StringValue:[],BooleanValue:[],EnumValue:[],ListValue:["values"],ObjectValue:["fields"],ObjectField:["name","value"],Directive:["name","arguments"],NamedType:["name"],ListType:["type"],NonNullType:["type"],SchemaDefinition:["directives","operationTypes"],OperationTypeDefinition:["type"],ScalarTypeDefinition:["name","directives"],ObjectTypeDefinition:["name","interfaces","directives","fields"],FieldDefinition:["name","arguments","type","directives"],InputValueDefinition:["name","type","defaultValue","directives"],InterfaceTypeDefinition:["name","directives","fields"],UnionTypeDefinition:["name","directives","types"],EnumTypeDefinition:["name","directives","values"],EnumValueDefinition:["name","directives"],InputObjectTypeDefinition:["name","directives","fields"],TypeExtensionDefinition:["definition"],DirectiveDefinition:["name","arguments","locations"]},f=b.BREAK={}}])},function(a,b,c){"use strict";(function(a){var d=c(3),e=c(4),f="undefined"==typeof a?"undefined"==typeof window?{}:window:a,g=f.WebSocket||f.MozWebSocket,h=c(1),i=c(2),j=c(6),k=c(5);(function(a){for(var c in a)b.hasOwnProperty(c)||(b[c]=a[c])})(c(0));var l=function(){function a(a,b,c){var f=b||{},h=f.connectionCallback,i=void 0===h?void 0:h,j=f.connectionParams,k=void 0===j?{}:j,l=f.timeout,m=void 0===l?5000:l,n=f.reconnect,o=f.reconnectionAttempts,p=void 0===o?1/0:o;if(this.wsImpl=c||g,!this.wsImpl)throw new Error("Unable to find native implementation, or alternative implementation for WebSocket!");this.connectionParams=k,this.connectionCallback=i,this.url=a,this.subscriptions={},this.maxId=0,this.subscriptionTimeout=m,this.waitingSubscriptions={},this.unsentMessagesQueue=[],this.reconnect=void 0!==n&&n,this.reconnectSubscriptions={},this.reconnecting=!1,this.reconnectionAttempts=p,this.backoff=new d({jitter:.5}),this.eventEmitter=new e.EventEmitter,this.connect()}return Object.defineProperty(a.prototype,"status",{get:function(){return this.client.readyState},enumerable:!0,configurable:!0}),a.prototype.close=function(){this.client.close()},a.prototype.subscribe=function(a,b){var c=this,d=a.query,e=a.variables,f=a.operationName,g=a.context;if(!d)throw new Error("Must provide `query` to subscribe.");if(!b)throw new Error("Must provide `handler` to subscribe.");if(!j(d)||f&&!j(f)||e&&!k(e))throw new Error("Incorrect option types to subscribe. `subscription` must be a string,`operationName` must be a string, and `variables` must be an object.");var i=this.generateSubscriptionId(),l=Object.assign(a,{type:h.SUBSCRIPTION_START,id:i});return this.sendMessage(l),this.subscriptions[i]={options:a,handler:b},this.waitingSubscriptions[i]=!0,setTimeout(function(){c.waitingSubscriptions[i]&&(b([new Error("Subscription timed out - no response from server")]),c.unsubscribe(i))},this.subscriptionTimeout),i},a.prototype.on=function(a,b,c){var d=this.eventEmitter.on(a,b,c);return function(){d.off(a,b,c)}},a.prototype.onConnect=function(a,b){return this.on("connect",a,b)},a.prototype.onDisconnect=function(a,b){return this.on("disconnect",a,b)},a.prototype.onReconnect=function(a,b){return this.on("reconnect",a,b)},a.prototype.unsubscribe=function(a){delete this.subscriptions[a],delete this.waitingSubscriptions[a];var b={id:a,type:h.SUBSCRIPTION_END};this.sendMessage(b)},a.prototype.unsubscribeAll=function(){var a=this;Object.keys(this.subscriptions).forEach(function(b){a.unsubscribe(parseInt(b))})},a.prototype.sendMessage=function(a){switch(this.client.readyState){case this.client.OPEN:this.client.send(JSON.stringify(a));break;case this.client.CONNECTING:this.unsentMessagesQueue.push(a);break;case this.client.CLOSING:case this.client.CLOSED:default:if(!this.reconnecting)throw new Error("Client is not connected to a websocket.");}},a.prototype.generateSubscriptionId=function(){var a=this.maxId;return this.maxId+=1,a},a.prototype.formatErrors=function(a){return Array.isArray(a)?a:a&&a.message?[a]:[{message:"Unknown error"}]},a.prototype.tryReconnect=function(){var a=this;if(this.reconnect&&!(this.backoff.attempts>this.reconnectionAttempts)){this.reconnecting||(this.reconnectSubscriptions=this.subscriptions,this.subscriptions={},this.waitingSubscriptions={},this.reconnecting=!0);var b=this.backoff.duration();setTimeout(function(){a.connect(!0)},b)}},a.prototype.connect=function(a){var b=this;void 0===a&&(a=!1),this.client=new this.wsImpl(this.url,i.GRAPHQL_SUBSCRIPTIONS),this.client.onopen=function(){b.eventEmitter.emit(a?"reconnect":"connect"),b.reconnecting=!1,b.backoff.reset(),b.sendMessage({type:h.INIT,payload:b.connectionParams}),Object.keys(b.reconnectSubscriptions).forEach(function(a){var c=b.reconnectSubscriptions[a],d=c.options,e=c.handler;b.subscribe(d,e)}),b.unsentMessagesQueue.forEach(function(a){b.client.send(JSON.stringify(a))}),b.unsentMessagesQueue=[]},this.client.onclose=function(){b.eventEmitter.emit("disconnect"),b.tryReconnect()},this.client.onerror=function(){},this.client.onmessage=function(a){var c,d=a.data;try{c=JSON.parse(d)}catch(a){throw new Error("Message must be JSON-parseable. Got: "+d)}var e=c.id;if(-1!==[h.KEEPALIVE,h.INIT_SUCCESS,h.INIT_FAIL].indexOf(c.type)||b.subscriptions[e]||(b.unsubscribe(e),c.type!==h.KEEPALIVE))switch(c.type){case h.INIT_FAIL:b.connectionCallback&&b.connectionCallback(c.payload.error);break;case h.INIT_SUCCESS:b.connectionCallback&&b.connectionCallback();break;case h.SUBSCRIPTION_SUCCESS:delete b.waitingSubscriptions[e];break;case h.SUBSCRIPTION_FAIL:b.subscriptions[e].handler(b.formatErrors(c.payload.errors),null),delete b.subscriptions[e],delete b.waitingSubscriptions[e];break;case h.SUBSCRIPTION_DATA:var f=c.payload.data||null,g=c.payload.errors?b.formatErrors(c.payload.errors):null;b.subscriptions[e].handler(g,f);break;case h.KEEPALIVE:break;default:throw new Error("Invalid message type!");}}},a}();b.SubscriptionClient=l}).call(b,c(7))}]);